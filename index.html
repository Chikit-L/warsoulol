<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>战魂觉醒OL</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/style.css" />
</head>
<body>
  <main class="container">
    <header class="hero">
      <h1>欢迎来到 <span class="accent">战魂觉醒OL</span></h1>
      <a class="primary" href="https://aring.cc/awakening-of-war-soul-ol/" target="_blank" rel="noopener">进入游戏</a>
    </header>

    <section class="timers">
      <div class="card">
        <h2>副本刷新倒计时</h2>
        <p class="hint">（每周日零点更新）</p>
        <div id="weekly-countdown" class="countdown">-- 天 -- 小时 -- 分钟 -- 秒钟</div>
      </div>
      <div class="card">
        <h2>大荒野刷新倒计时</h2>
        <p class="hint">（每月月初零点刷新）</p>
        <div id="monthly-countdown" class="countdown">-- 天 -- 小时 -- 分钟 -- 秒钟</div>
      </div>
    </section>

    <section class="card festival-ct" data-deadline="2025-10-19 00:00:00">
    <h2>中秋·国庆庆典倒计时</h2>
    <div class="countdown" data-ct>-- 天 -- 小时 -- 分钟 -- 秒钟</div>
    </section>


  <!-- 🆕 商户价格监控 -->
  <section class="notice">
    <p style="
      font-size: 1.6em;
      font-weight: 700;
      margin-bottom: 0.4em;
    ">
      <a href="https://chikit-l.github.io/WarSoul_Monitor/" 
        target="_blank" 
        rel="noopener"
        style="color: #0056b3; text-decoration: underline; text-underline-offset: 4px;">
        商户价格监控
      </a>
    </p>
      <p style="font-size: 0.95em; color: #ffffff; margin: 0.3em 0 0.8em;">
    提供商户长期历史价格，并给出操作建议。
    </p>
    <p class="howto" style="margin-top: 0; color: #444;">
      注意：页面所提供信息仅供参考。由于 GitHub Actions 更新存在一定延迟，在参考信息时请注意页面的更新时间。
    </p>
  </section>



    <section class="gm">
      <h2>油猴脚本</h2>
      <p class="howto">如何使用？
        <a href="https://blog.csdn.net/qq_39201211/article/details/146199386" target="_blank" rel="noopener">点击查看教程</a>
      </p>

    <div class="table-wrap">
      <table class="gm-table">
        <thead>
          <tr>
            <th>脚本名称</th>
            <th>版本号</th>
            <th>更新时间</th>
            <th>官方安装</th>
            <th>镜像链接</th>
            <th>说明</th>
          </tr>
        </thead>
        <tbody id="script-rows">
          <!-- JS 渲染 -->
        </tbody>
      </table>
    </div>
    </section>

    <footer class="foot">
      <span>© <span id="year"></span> Lunaris </span>
    </footer>
  </main>

  <script src="./assets/app.js"></script>

  <!-- 北京时间活动倒计时 -->
<script>
  // 把 "YYYY-MM-DD HH:MM:SS" 当北京时间解析
  function parseBeijingDateTime(str) {
    const [datePart, timePart="00:00:00"] = str.trim().split(/\s+/);
    const [Y, M, D] = datePart.split("-").map(Number);
    const [h, m, s] = timePart.split(":").map(Number);
    // UTC 时间 = 北京时间 - 8 小时
    return new Date(Date.UTC(Y, (M || 1) - 1, D || 1, (h || 0) - 8, m || 0, s || 0));
  }

  function setupFestivalCountdown(el) {
    const target = parseBeijingDateTime(el.getAttribute("data-deadline"));
    const out = el.querySelector("[data-ct]");

    function tick() {
      const now = new Date();
      const ms = target - now;
      if (ms <= 0) {
        el.remove();
        clearInterval(timer);
        return;
      }
      const totalSec = Math.floor(ms / 1000);
      const d = Math.floor(totalSec / 86400);
      const h = Math.floor((totalSec % 86400) / 3600);
      const m = Math.floor((totalSec % 3600) / 60);
      const s = totalSec % 60;
      out.textContent = `${d}天 ${h}小时 ${m}分钟 ${s}秒钟`;
    }

    tick();
    const timer = setInterval(tick, 1000);
  }

  document.querySelectorAll(".festival-ct[data-deadline]").forEach(setupFestivalCountdown);
</script>
</body>
</html>
