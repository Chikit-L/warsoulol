<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æˆ˜é­‚è§‰é†’OL</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/style.css" />
</head>
<body>
  <main class="container">
    <header class="hero">
      <h1>æ¬¢è¿æ¥åˆ° <span class="accent">æˆ˜é­‚è§‰é†’OL</span></h1>
      <a class="primary" href="https://aring.cc/awakening-of-war-soul-ol/" target="_blank" rel="noopener">è¿›å…¥æ¸¸æˆ</a>
    </header>

    <section class="timers">
      <div class="card">
        <h2>å‰¯æœ¬åˆ·æ–°å€’è®¡æ—¶</h2>
        <p class="hint">ï¼ˆæ¯å‘¨æ—¥é›¶ç‚¹æ›´æ–°ï¼‰</p>
        <div id="weekly-countdown" class="countdown">-- å¤© -- å°æ—¶ -- åˆ†é’Ÿ -- ç§’é’Ÿ</div>
      </div>
      <div class="card">
        <h2>å¤§è’é‡åˆ·æ–°å€’è®¡æ—¶</h2>
        <p class="hint">ï¼ˆæ¯æœˆæœˆåˆé›¶ç‚¹åˆ·æ–°ï¼‰</p>
        <div id="monthly-countdown" class="countdown">-- å¤© -- å°æ—¶ -- åˆ†é’Ÿ -- ç§’é’Ÿ</div>
      </div>
    </section>

    <section class="card festival-ct" data-deadline="2025-10-19 00:00:00">
    <h2>ä¸­ç§‹Â·å›½åº†åº†å…¸å€’è®¡æ—¶</h2>
    <div class="countdown" data-ct>-- å¤© -- å°æ—¶ -- åˆ†é’Ÿ -- ç§’é’Ÿ</div>
    </section>


  <!-- ğŸ†• å•†æˆ·ä»·æ ¼ç›‘æ§ -->
  <section class="notice">
    <p style="
      font-size: 1.6em;
      font-weight: 700;
      margin-bottom: 0.4em;
    ">
      <a href="https://chikit-l.github.io/WarSoul_Monitor/" 
        target="_blank" 
        rel="noopener"
        style="color: #0056b3; text-decoration: underline; text-underline-offset: 4px;">
        å•†æˆ·ä»·æ ¼ç›‘æ§
      </a>
    </p>
      <p style="font-size: 0.95em; color: #ffffff; margin: 0.3em 0 0.8em;">
    æä¾›å•†æˆ·é•¿æœŸå†å²ä»·æ ¼ï¼Œå¹¶ç»™å‡ºæ“ä½œå»ºè®®ã€‚
    </p>
    <p class="howto" style="margin-top: 0; color: #444;">
      æ³¨æ„ï¼šé¡µé¢æ‰€æä¾›ä¿¡æ¯ä»…ä¾›å‚è€ƒã€‚ç”±äº GitHub Actions æ›´æ–°å­˜åœ¨ä¸€å®šå»¶è¿Ÿï¼Œåœ¨å‚è€ƒä¿¡æ¯æ—¶è¯·æ³¨æ„é¡µé¢çš„æ›´æ–°æ—¶é—´ã€‚
    </p>
  </section>



    <section class="gm">
      <h2>æ²¹çŒ´è„šæœ¬</h2>
      <p class="howto">å¦‚ä½•ä½¿ç”¨ï¼Ÿ
        <a href="https://blog.csdn.net/qq_39201211/article/details/146199386" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æ•™ç¨‹</a>
      </p>

    <div class="table-wrap">
      <table class="gm-table">
        <thead>
          <tr>
            <th>è„šæœ¬åç§°</th>
            <th>ç‰ˆæœ¬å·</th>
            <th>æ›´æ–°æ—¶é—´</th>
            <th>å®˜æ–¹å®‰è£…</th>
            <th>é•œåƒé“¾æ¥</th>
            <th>è¯´æ˜</th>
          </tr>
        </thead>
        <tbody id="script-rows">
          <!-- JS æ¸²æŸ“ -->
        </tbody>
      </table>
    </div>
    </section>

    <footer class="foot">
      <span>Â© <span id="year"></span> Lunaris </span>
    </footer>
  </main>

  <script src="./assets/app.js"></script>

  <!-- åŒ—äº¬æ—¶é—´æ´»åŠ¨å€’è®¡æ—¶ -->
<script>
  // æŠŠ "YYYY-MM-DD HH:MM:SS" å½“åŒ—äº¬æ—¶é—´è§£æ
  function parseBeijingDateTime(str) {
    const [datePart, timePart="00:00:00"] = str.trim().split(/\s+/);
    const [Y, M, D] = datePart.split("-").map(Number);
    const [h, m, s] = timePart.split(":").map(Number);
    // UTC æ—¶é—´ = åŒ—äº¬æ—¶é—´ - 8 å°æ—¶
    return new Date(Date.UTC(Y, (M || 1) - 1, D || 1, (h || 0) - 8, m || 0, s || 0));
  }

  function setupFestivalCountdown(el) {
    const target = parseBeijingDateTime(el.getAttribute("data-deadline"));
    const out = el.querySelector("[data-ct]");

    function tick() {
      const now = new Date();
      const ms = target - now;
      if (ms <= 0) {
        el.remove();
        clearInterval(timer);
        return;
      }
      const totalSec = Math.floor(ms / 1000);
      const d = Math.floor(totalSec / 86400);
      const h = Math.floor((totalSec % 86400) / 3600);
      const m = Math.floor((totalSec % 3600) / 60);
      const s = totalSec % 60;
      out.textContent = `${d}å¤© ${h}å°æ—¶ ${m}åˆ†é’Ÿ ${s}ç§’é’Ÿ`;
    }

    tick();
    const timer = setInterval(tick, 1000);
  }

  document.querySelectorAll(".festival-ct[data-deadline]").forEach(setupFestivalCountdown);
</script>
</body>
</html>
